<mat-spinner [diameter]="40" *ngIf="loading$ | async; else map"></mat-spinner>

<ng-template #map>
    <mat-card>
        <agm-map *ngIf="initialData" [latitude]="initialData[0].geoLat"
                 [longitude]="initialData[0].geoLng">
            <agm-marker *ngFor="let intervention of initialData.slice(0,200)" [latitude]="intervention.geoLat"
                        [longitude]="intervention.geoLng">
                <agm-info-window [disableAutoPan]="false">
                    <app-intervention-details [intervention]='intervention' embedded="true">
                    </app-intervention-details>
                </agm-info-window>
            </agm-marker>
        </agm-map>
    </mat-card>
</ng-template>

